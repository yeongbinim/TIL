# 도메인 Entity와 영속성 객체는 분리해야 할까

Jpa를 추가하면서 `@Entity` 를 추가하려 했는데, 처음엔 기존 도메인 모델에 추가하는 것이 적당할 것 같다고 생각했다.

하지만, 비즈니스 영역을 해결하는 도메인 모델에 저 DB 접근 기술을 직접적으로 추가해도 되는걸까? 고민이 되었다.

<br/>

이 고민에 대해서 **구분하지 않는다는 사람들은 주로 "그럴거면 ORM을 왜 쓰니? 그리고 그 둘의 변경 주기가 같아서 불편해"**라는 의견을 가지고,

**구분해야 한다는 사람들은 주로 "DB 기술과 강결합 되잖아. 그럼 서비스 계층의 순수함을 잃게 돼"**라는 의견이다.

<br/>

'[[NHN FORWARD 22] 클린 아키텍처 애매한 부분 정해 드립니다](https://youtu.be/g6Tg6_qpIVc?t=2047)' 에서 나온 내용을 요약해보면 아래와 같다.

> 클래스나 패키지 구조는 단순해진다는 장점이 있지만, 영속성 계층과 도메인 계층이 하나로 붙어버리는 단점이 있다.
>
> 분리하면 핵심 업무 규칙에 대한 고민에 집중할 수 있으며 이 이점이 더 크다.
>
> 다만 클린 아키텍처 이럴땐 쓰지 말아라
>
> - 소규모의 프로젝트를 진행할 때
> - 프로젝트 개발자 모두가 클린 아키텍처를 이해하고 있지 않을때
> - 모두가 사용하기로 합의하지 않을때



내가 생각하는 3Layerd Architecture는 서비스 계층을 순수하게 지키기 위해서 분리된 건데, 도메인 엔티티가 영속성 객체가 되는 순간 그 순수함이 사라지게 되는 것이.. 많이 찝찝하다.

도메인 엔티티를 영속성 객체로 만들면, 도메인에 Table 이름이 들어가야 하고, column이름이 들어가야 하고, Jpa 로딩 전략이 명시되어야 하는데, 이게 너무 부자연스럽달까....

<br/>

둘을 **분리하는게 클린 아키텍처를 지키는 원칙**이고, **분리하지 않는게 더 편리**하게 해주는데, 이 원칙과 편의성의 줄다리기가 필요하다.

그래도 그래도..... '도메인 모델만큼은 순수했으면 좋겠다...!!!' 가 내 생각이다. (아마 실전에서는 이 둘을 분리해보자고 팀원들을 설득하려 할 것 같다.)

그런데 앞으로 몇 주 동안만 진행되는 짧은 프로젝트를 진행할 때에는 그냥 도메인 엔티티를 DB 엔티티로 사용할 것 같기는 하다.

아래는 참고자료!

- [질문: DB 엔티티와 도메인 분리](https://www.inflearn.com/community/questions/945855/db-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%99%80-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%B6%84%EB%A6%AC?focusComment=280701)

- [질문: 진짜 객체지향에서는 jpa가 의미없는게 아닌가하는 생각](https://www.inflearn.com/community/questions/978220/%EC%A7%84%EC%A7%9C-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%EA%B3%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0-%EC%89%AC%EC%9A%B4-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9C%84%ED%97%A4%EC%84%9C%EB%8A%94-jpa%EA%B0%80-%EC%9D%98%EB%AF%B8%EC%97%86%EB%8A%94%EA%B2%8C-%EC%95%84%EB%8B%8C%EA%B0%80%ED%95%98%EB%8A%94-%EC%83%9D%EA%B0%81%EC%9D%B4-%EB%93%A4%EC%96%B4%EC%9A%94)

- [질문: jpa의 더티체킹 사용에 대해서](https://www.inflearn.com/community/questions/947209/jpa%EC%9D%98-%EB%8D%94%ED%8B%B0%EC%B2%B4%ED%82%B9-%EC%82%AC%EC%9A%A9%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C)

- [질문: 도메인 객체와 영속성 객체를 구분하게 되면](https://www.inflearn.com/community/questions/1146350/%EB%8F%84%EB%A9%94%EC%9D%B8-%EA%B0%9D%EC%B2%B4%EC%99%80-%EC%98%81%EC%86%8D%EC%84%B1-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EA%B5%AC%EB%B6%84%ED%95%98%EA%B2%8C-%EB%90%98%EB%A9%B4)

